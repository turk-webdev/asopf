<style>
    #search-bar {
        max-width: 50%;
        min-width: 10%;
        padding: 10px;
        font-size: 17px;
        border: 1px solid grey;
        float: left;
        width: 80%;
        background: #f1f1f1;
        border-top-left-radius: 5px;
        border-bottom-left-radius: 5px;
    }

    #search-button1 {
        float: left;
        min-width: 5%;
        padding: 10px;
        background: #9d4973;
        color: white;
        font-size: 17px;
        border: 1px solid #222;
        border-left: none;
        cursor: pointer;
    }

    #search-button2 {
        float: left;
        min-width: 5%;
        padding: 10px;
        background: #b71811;
        color: white;
        font-size: 17px;
        border: 1px solid #222;
        border-left: none;
        cursor: pointer;
        border-top-right-radius: 5px;
        border-bottom-right-radius: 5px;
    }
    @media (min-width: 768px) {
        nav.navbar {
            max-height: 60px;
            overflow: hidden;
        }
    }
</style>

<script src="/js/navSearch.js" type="text/javascript"></script>

<nav class="navbar navbar-expand-lg navbar-dark bg-dark" style="background-color: #5B7F95;">
    <div class="container-fluid">
        <div class="col-md-2 col-xs-2">
            <a class="navbar-brand pb-2" href="/"><img id="logo" src="/img/asopf_name_logo.png"></a>
        </div>
        <div class="col-md-6 col-xs-4">
            <input id="search-bar" placeholder="County name" value="San Francisco">
            <button type="submit" id="search-button1" onclick="submit(1)"><i class="fas fa-disease"></i></button>
            <button type="submit" id="search-button2" onclick="submit(2)"><i class="fas fa-fire"></i></button>
        </div>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown"
            aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse justify-content-end" id="navbarNavDropdown">
            <ul class="navbar-nav align-self-end" id="nav">
                <li class="nav-item">
                    <a class="nav-link <%= path === '/search/covid' ? 'active' : '' %>" href="/search/covid">Search</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link <%= path === '/about' ? 'active' : '' %>" href="/about-us/">About Us</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link <%= path === '/about' ? 'active' : '' %>" href="/login/">Login or Register</a>
                </li>
                <li class="nav-item dropdown d-none">
                    <a class="nav-link dropdown-toggl" href="#" id="navbarDropdownMenu" role="button"
                        data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <span class="navbar-toggler-icon"></span>
                    </a>
                    <ul class="dropdown-menu dropdown-menu-right bg-info" aria-labelledby="navbarDropdownMenu">
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</nav>
<script>
    var autocollapse = function (menu, maxHeight) {

        var nav = $(menu);
        var navHeight = nav.innerHeight();
        if (navHeight >= maxHeight) {

            $(menu + ' .dropdown').removeClass('d-none');
            $(".navbar-nav").removeClass('w-auto').addClass("w-100");

            while (navHeight > maxHeight) {
                //  add child to dropdown
                var children = nav.children(menu + ' li:not(:last-child)');
                var count = children.length;
                $(children[count - 1]).prependTo(menu + ' .dropdown-menu');
                navHeight = nav.innerHeight();
            }
            $(".navbar-nav").addClass("w-auto").removeClass('w-100');

        }
        else {

            var collapsed = $(menu + ' .dropdown-menu').children(menu + ' li');

            if (collapsed.length === 0) {
                $(menu + ' .dropdown').addClass('d-none');
            }

            while (navHeight < maxHeight && (nav.children(menu + ' li').length > 0) && collapsed.length > 0) {
                //  remove child from dropdown
                collapsed = $(menu + ' .dropdown-menu').children('li');
                $(collapsed[0]).insertBefore(nav.children(menu + ' li:last-child'));
                navHeight = nav.innerHeight();
            }

            if (navHeight > maxHeight) {
                autocollapse(menu, maxHeight);
            }

        }
    };


    $(document).ready(function () {

        // when the page loads
        autocollapse('#nav', 50);

        // when the window is resized
        $(window).on('resize', function () {
            autocollapse('#nav', 50);
        });

    });

</script>